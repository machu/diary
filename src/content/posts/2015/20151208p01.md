---
title: tDiary 4.2.0.20151201
date: 2015-12-08T00:00:00.000Z
lastmod: 2015-12-08T23:37:26.000Z
draft: false
tags:
  - tdiary
---

時間を見つけて少しずつtDiaryに手を入れている。忘れないようにメモしておこう。

#### [tdiary.confにRackの設定を書けるようにする](https://github.com/tdiary/tdiary-core/pull/493)

ここの日記のようにtDiaryをサブディレクトリに設置している時に、これまではconfig.ruにサブディレクトリ名を書く必要があった。これをtdiary.confの設定を読むように変えた。これで設置者がconfig.ruを触る必要がなくなるはず。

#### [tdiaryの依存ライブラリをGemfileではなくgemspecに記述する](https://github.com/tdiary/tdiary-core/pull/517)

こっちは内部の修正。tdiary本体はバージョン4からgemでもインストールできるようになっているけど、依存ライブラリはtdiary.gemspecではなくGemfileに書くようになっていた。これを依存ライブラリはtdiary.gemspecに統一するようにした。これでGemfileには `gem 'tdiary'` や `gem 'tdiary', github: 'tdiary/tdiary-core'` などと書くだけで依存ライブラリも自動的にインストールしてくれるようになった。

#### [fix authentication error by omniauth and rack::session::pool](https://github.com/tdiary/tdiary-core/pull/521)

OmniAuth認証とRack::Session::Poolを併用するとうまくTwitter認証が動いていなかった問題を修正。
