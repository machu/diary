---
title: さくらのレンタルサーバから CPI へとお引っ越し
date: 2009-04-09T00:00:00.000Z
lastmod: 2009-04-12T08:21:02.000Z
draft: false
tags:
  - memo
  - tDiary
---

最近、この日記でたまに 503 エラーがでるようになった。 Ruby1.9 で動かすようにした影響かどうかは、よく分からない。 だからという訳でもないけど、この日記をさくらのレンタルサーバから[去年契約した](/posts/20080916/p02) CPI の VPS サーバへと移転することにした。 さくらを使い出したのは[2004年の8月](/posts/20040816/p01)だから、5年弱くらいお世話になったのか。

#### やったこと

- VPSサーバ上に Apache Web サーバを構築

  - 不要なモジュールは極力載せない方針
  - vhost_alias_module を導入してサブドメイン対応
  - proxy_module を導入して、一部コンテンツ (trac) は別ポートの tracd へと転送するようにしている

- 公開フォルダ (www) と日記データ (var) を新サーバへコピー

- www\.machu.jp の DNS エントリを書き換え

この日記の HTTP レスポンスヘッダをみると、これまでは

```
Server: Apache/1.3.41 (Unix) mod_ssl/2.8.31 OpenSSL/0.9.8e
```

だったのが今では

```
Server: Apache/2.2.3 (CentOS)
```

になった。

新しいサーバは VPS サーバなので、 Web サーバ以外にもリソースが許す限り自由にプロセスを立ち上げられるのが魅力。 サイトのレスポンスも、少し早くなったかな。
