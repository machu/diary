---
title: Amazon API認証リバースプロキシを heroku + Sinatra に移植した
date: 2011-09-25T00:00:00.000Z
lastmod: 2011-10-01T17:08:11.000Z
draft: false
tags:
  - amazon
  - tdiary
  - ruby
  - sinatra
---

[id:furyu-tei](http://d.hatena.ne.jp/furyu-tei/)さんが作られた[Product Advertising API用リバースプロキシ](http://honnomemo.appspot.com/rpaproxy/)を、heroku上で動くように Sinatra に移植した。

![Product Advertising API用リバースプロキシ](@/assets/flickr/6181886994.jpg "Product Advertising API用リバースプロキシ")

- [Product Advertising API用リバースプロキシ](http://rpaproxy.tdiary.org/) (Heroku版)
- [machu/rpaproxy-sinatra - GitHub](https://github.com/machu/rpaproxy-sinatra)
- [machu/rpaproxy-sinatra - Travis CI](http://travis-ci.org/machu/rpaproxy-sinatra/)

事の発端は [GAE が値上げする](http://www.hsbt.org/diary/20110909.html#p01)という話から。 値上げについては猶予ができたみたいだけど、いざというときのために汎用的な部品で作っておいた方がいいだろう。

エラー処理やテストなど一部不完全なところもあるし、ドメインもheroku.comをそのまま使うかどうか未定だけど、テスト目的を兼ねて公開しておく。 プロキシは[自分のサーバしか登録していない](http://rpaproxy.tdiary.org/proxies)ので、今の時点では負荷分散になっていないので注意。 認証プロキシを公開されている方の登録をお待ちしています。

#### プロキシテスト

この日記の Amazon プラグインを新しいリバースプロキシに問い合わせるように書き換えてみた。 テストを兼ねて[ICOとワンダ](https://www.amazon.co.jp/dp/B0054I9ZHW)へのリンクを貼ってみた。うん、ちゃんと動いているみたい。

#### 参考

- [Product Advertising API用リバースプロキシ](http://honnomemo.appspot.com/rpaproxy/)
- [Amazon API認証のPROXYを書いたよ(2) - ただのにっき(2009-07-06)](http://sho.tdiary.net/20090706.html#p01)
- [Amazon API認証プロキシ用のリバース・プロキシ作ってみた - 風柳メモ](http://d.hatena.ne.jp/furyu-tei/20090709/1247142040)
- [Apache モジュール版の Amazon API 認証プロキシを作ったよ - まちゅダイアリー(2009-07-26)](/posts/20090726/p01)
