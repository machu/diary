---
title: 'Identity Conference #2'
date: 2008-06-22T00:00:00.000Z
lastmod: 2008-08-21T22:46:52.000Z
draft: false
tags:
  - OpenID
---

[Identity Conference #2](http://d.hatena.ne.jp/ZIGOROu/20080623/1214193393)に参加させてもらった。 幹事の[水野さん](http://d.hatena.ne.jp/mizuno_takaaki/20080625/1214367763)、講演者の皆さん、ありがとうございます。

#### (1) XRI, Reputation, Trust (=natさん)

僕は、OpenIDの課題のひとつに、[URLをIDとして使うことによる敷居](http://gihyo.jp/dev/feature/01/openid/0006)があると思っている。 それを解決するための方法の一つがXRIということで、この基調講演はとても興味深かった。

##### XRIについて

* XRIはOASIS Openで標準化している。

* XRIは識別子、XRDS、検索の三本柱になっている

* 人が理解するi-name（再利用可）と機械が理解するi-number（再利用不可）をペアで管理する

  * 再利用不可のIDには「!」が含まれる
  * i-numberと対にすることで、i-nameを再利用できる → [OpenIDの再利用問題](http://rakuto.blogspot.com/2008/04/openid_26.html)を解決する
  * i-nameが同じでも、i-numberが異なれば別のユーザと判断する。i-numberがURIのフラグメントと同じ役割を果たしている。

XRI は DNS にちょっと似ていて、階層の概念がある。 トップレベルの名前を取得するには、それなりに厳しい審査が必要とのこと。 第２レベルは比較的自由。

```
@free*username
```

なんかは第２レベルの例。 @free がトップレベルで、その後に \* を付けてユーザ名を連結している。 ちなみに、先頭が = なのは個人で、 @ なのは組織らしい。

##### XRDSについて

* XRDSを使うとXRIからURLやメールアドレスを引くことができる

これは実際に試してみると分かりやすい。 XRIを使うと、 =nat さんのブログは =nat/(+blog) で、連絡先は =nat/(+contact) と表現される。 XRIからブログのURLや連絡先を調べる方法はいくつかある。

1. [inamesのプロキシ](http://www.inames.net/about_proxy.html)に手動で入力する
2. XRIをURIにマッピングする

後者は、以下のようなURLになる。

* <http://xri.net/=nat/(+blog)> ← =nat さんのブログにリダイレクトされる
* <http://xri.net/=nat/(+contact)> ← =nat さんのメールアドレス (mailto) にリダイレクトされる

いずれの方法にしても、XRIをブログのURLやメールアドレスへと変換している。 なので、DNSサーバがFQDNとIPアドレスを結びつけているように、XRIとURLやメールアドレスを結びつけるものが必要になる。 それがXRDSというXMLファイルになる。

\=nat さんの XRDS は以下のようにして取得できる。

```
$ curl 'http://xri.net/=nat?_xrd_r=application/xrds+xml'
```

XRIの後に \_xrd\_r というクエリストリングを付けている。 これは、[zigorouさんのYAPCプレゼン](http://yapc.art-code.org/asia/2008/#slide=23\&step=1)を参考にした。

レスポンスとして[XRDSが返ってきて](http://xri.net/=nat?_xrd_r=application/xrds+xml)、そのなかに (+contact) に対応するメールアドレスが書かれているのが分かる。

それ以外の場合 (+blogの場合) は linksafe-forward.ezibroker.net というサイトにリダイレクトしているっぽい。 このサイトに接続すると、さらに以下のように =nat さんのブログ (www\.sakimura.org) へのリダイレクトが返ってくる。 （この関連付けに XRDS を使っているのかどうかは分からなかった）

```
$ curl -I 'http://linksafe-forward.ezibroker.net/forwarding/=nat/(+blog)'
HTTP/1.1 302 Moved Temporarily
Date: Thu, 26 Jun 2008 15:20:37 GMT
Server: Apache
Set-Cookie: JSESSIONID=28370DD0FADF74F8B943D8B97A4E9740; Path=/forwarding
Location: http://www.sakimura.org/en/
Connection: close
Content-Type: text/html;charset=UTF-8
X-Pad: avoid browser bug
```

こんな風に、 XRI を使うとブログの URL やメールアドレスをシンプルに表現できるよってことみたい。

ちなみに、 [@freeXRIが提供している XRI Resolution](http://www.freexri.com/tools/XRIResolution/) を使うと、 curl を使わなくても XRI に関連づけられた XRDS を調べることができる。

##### XRI と URI

さっきの例では XRI を以下のように URI で表現できた。

```
http://xri.net/=nat
```

それで、 URI で表現できるのなら、わざわざ

```
xri://=nat
```

みたいな新しいスキーマを用意する必要があるの？という意見がでていて、議論になっているみたい。 この辺の話題は[XRI vs URI - Yet Another Hackadelic](http://d.hatena.ne.jp/ZIGOROu/20080606/1212781600)や、そこのコメント欄が参考になる。 この議論には、

> 「Webは世界の一部」 vs 「世界はWebの一部」

という考え方の相違があるようで、これはなるほどと思った。 もう少し具体的なことを話されていたけど、ここではパス。

##### OpenID の課題

このペースで書いていると終わる気がしないので、箇条書きに戻す。

* OpenIDはTrustメカニズムが不足している。

* 信憑性 Reputation が必要

* 認証手段はIdPが主張しているだけ。それを客観的にどうやって信じるか。
  * ORMS TCで議論している。

* 非否認性

  * 契約の概念。事後否認。署名の世界。
  * Trusted Data Exchange
  * ID-WSFに近い。
  * Reputation Serviceと公開鍵の取得。

「否認防止」は PKI のデジタル署名でよく登場する話。 OpenID の場合、発行サイト (OP) から対応サイト (RP) へと送られる認証結果 (OpenID Response) は、 OP の署名がついている。 でもその実体は OP と RP で共有している鍵なので、OPが後で「そんなユーザを認証した覚えは無い」とRPへ言うこともできる。

今の OpenID の利用レベルだと、（RP は OP を信頼している前提なので） OP にそこまで求めなくても良いと思う。 けど、より重要度の高いトランザクションに使いたい場合はこういうことも考えないといけないのかな。

##### OpenID の利用例

[JALと旅行代理店でのOpenID利用例](http://openid-japan.org/modules/news/details.php?bid=6)について。

> このサービスによって、JMB会員は、ミキのサイトで新たに個人情報などを入力しなくても、JMB番号でログインして、宿泊予約や代金決済などが自由にできるようになった。

ということで、 OpenID をベースにして、属性情報を取得するという話。 限定された環境での OpenID の利用ということで、少し Liberty の ID-WSF の世界っぽかった。

##### まとめ

特に、最後の事例がとても興味深かった。 飛行機の予約とホテルの予約の例は、まさに [Liberty Alliance のユースケース](http://h50146.www5.hp.com/services/infrastructure/liberty/casestudy.html)。 それが OpenID で実装されているというところが、衝撃的だなぁ。

#### (2) Apache2::AuthenOpenID

[id:lopnor](http://d.hatena.ne.jp/lopnor/20080623/1214152332)によるプレゼン。 [Apache2::AuthenOpenID](http://d.hatena.ne.jp/lopnor/20071014/1192376265)は Apache の OpenID 対応認証モジュール。 これを導入すれば、 .htaccess を書くだけで簡単に OpenID のクライアントになることができる。 前から面白いなぁと思って気になっていたので、開発の背景を聞くことができたのが嬉しい。

* OpenIDっていつ使うのさ。
  * 例えば、知り合いに写真を見せたい。

* 「ひと」と「ひと」をOpenIDでつなげる。
  * .htaccessを書くだけでOpenIDが使える。

* 認証はPerlのモジュールを任せる。

* 認可はApacheのauthz\_userに任せている。

  * 認可の応用。AuthzHatenaPoint
  * 認可の応用: livedoor blogのプライベートモード

* サーバ管理者が組み込めば、ユーザが簡単に使える。

- 「認識可能な識別子」が重要。

  * Yahoo!のOpenIDアカウント名は、長過ぎて利用者が .htaccess に書けるとは思えない。
  * (そこでXRI？とか思ったりした）

- 「理解可能な画面遷移」が重要

  * なんでこのページにいるの？フィッシングじゃないの？
  * (これは結構重要な指摘)

- メールアドレスのToのほうが分かりやすいじゃん。
  * 誰のための仕組み？

##### Q\&A

* SREGと連携すれば面白そう。
* xriは通らない
* フラグメント付きのIDを書かせるのは厳しい。
  * Claimed Identifierベース。

- OpenID は認証には使えるが認可には使えない？
- コンピュータが管理するのか、人が管理するのかの違い。
  * （OpenIDはi-numberに近い？）

利用者視点での使い勝手をしっかりと考えられているなぁ…と思った。 理論がしっかりしていても使い勝手が悪いと普及しないので、このプレゼンの順番は GJ 。

あと、忘れてた。

> 認証＝あんただれ、認可＝あんただめ

これはすごく分かりやすい。もっと流行るべき。

#### (3) Attribute Exchange (AX)

[id:zigorou さん](http://d.hatena.ne.jp/ZIGOROu/20080623/1214193393)による AX の解説。

> AX は現時点で対応している OP が myopenid, sxipper しか無く、また仕様上もかなり gdgd で罠も多いと。余り現時点で使える代物ではありません。

という話だった。 以下は自分の思ったことを含めてのメモ。

* AXは特定の人が進めているだけ

* OAuthに行って帰ってこない人も。足並みがそろってない。

* 草の根の人はフォーマルな仕様策定が苦手。

  * GIF裁判の教訓。ちゃんとやらないとダメ。
  * (参加者が特許を行使しないことが前提？)

* SxipperのAXはCardSpaceに似ている。

#### (4) ID-WSF の紹介

NTT伊藤さんによる ID-WSF の紹介。 資料は [slideshare にアップ](http://www.slideshare.net/hiroki/080620-identity-conference-2-hiroki/)されている。 ネット上で入手できる ID-WSF に関する資料の中では、一番詳しく書かれていると思う。

個人的には DS (Discovery Service) が Web Service の UDDI を連想してしまって、こういうサービスはどれくらい流行るんだろうな…と思った。 仕様策定の時にも、 DS と IdP は一つにするという議論があったみたい。

ともあれ、時間をかけて仕様を決めているだけあって、かなりよく考えられている感じ。 AX や SREG などの OpenID の属性交換での課題も、 ID-WSF での議論が参考になるんだろうなと思った。 7月18日に[第三回Liberty Alliance 技術セミナー](http://groups.google.co.jp/group/idcon-ja/web/liberty-alliance-2)が開催されるようなので、そこでもう少し詳しく聞いてこよう。

なんだか、ずいぶんと感想が長くなってしまった。 まだ書き足りないこともあるけど、ちょっと気力が尽きちゃった。 懇親会は１次会までの参加だったけど、２次会がメインだったらしい。 残念。

次回はプレゼンの場を与えていただいたので、自分なりのネタを考えてみようと思う（プレゼン駆動開発）。
