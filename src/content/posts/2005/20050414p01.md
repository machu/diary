---
title: coLinux で Debian (2)
date: 2005-04-14T00:00:00.000Z
lastmod: 2014-07-12T13:09:26.000Z
draft: false
tags:
  - Debian
---

[coLinux への Debian インストール話](/posts/20050412/p02)の続き。

#### sarge へのアップグレード

最初にインストールした「Debian-3.0r2.ext3-mit-backports.1gb.bz2」は安定版なので、Rubyのバージョンが1.6だったりと各種ソフトウェアが古い。 なので、比較的新しいソフトウェアが使える sarge へとアップグレードする。

Debian では apt-get コマンドを使って、パッケージを自動的にダウンロード＆インストールができる（Gentoo の emerge や Windows Update のようなもの）。 ダウンロード元のサーバは、 /etc/apt/source.list に記述しておく。

netselect というコマンドを使えば、高速なサーバを自動的に選んでくれるみたいだけど、うまく動かなかったので直接サーバを指定している。

```
deb http://ftp.jp.debian.org/debian/ testing main
deb http://security.debian.org/ testing/updates main
deb http://ftp2.jp.debian.org/debian/ testing main contrib non-free
deb http://www.ring.gr.jp/archives/linux/debian/debian/ testing main contrib non-free
deb-src http://ftp.jp.debian.org/debian/ testing main
```

元のファイルには「stable」が指定されていたけど、これを「testing」としている。 stable (安定版) が Woody で、testing (テスト版) が Sarge というステータスなのね。

source.list を修正したら、 root にて下記のコマンドを実行する。

```
# apt-get update
# apt-get -u dist-upgrade
```

「apt-get update」はGentooの「emerge --sync」と似たようなものっぽい。「apt-get -u dist-upgrade」は「emerge -u world」かな。 これが終われば、 sarge へのアップグレードは終了。

とにかく、 apt-get の使い方を覚えないと難儀する。 [AptGet - Debian GNU/Linux スレッドテンプレ](http://debian.fam.cx/?AptGet)が参考になるかも。

#### ユーザ作成

本当はインストール直後にやっておくことなんだろうけど。

```
# useradd -m machu
# passwd machu
# groupadd wheel
# usermod -G wheel machu
```

-m オプションをつけると、自動的にホームディレクトリを作成してくれる。便利。 wheel グループを作成して、 machu ユーザをグループに追加している。 wheel ユーザは sudo を使えるように後で設定する。

#### 必要パッケージのインストール

ここまでで基本設定は終わったので、後は基本パッケージをインストールしていく。 インストール方法は

```
# apt-get install ＜パッケージ名＞
```

でよい。

- ssh
- screen
- sudo
- gcc
- make
- libc6-dev （これを入れないと、コンパイル時に「/usr/bin/ld: crt1.o: No such file: No such file or directory」とエラーになる）
- vim
- vim-ruby
- host (nslookup の代替)
- nkf
- ruby
- ruby1.8-dev (mkmfを使うプログラムはこれが必要）
- libdb4.3
- libdb4.2-ruby1.8

ところで、coLinux で Gentoo を入れた自宅のPCは、emerge -u world で（glibcのコンパイル中に）マシンが固まってしまうという困った状態に。 熱暴走なんだろうか？ CPU温度は20℃なのに。
