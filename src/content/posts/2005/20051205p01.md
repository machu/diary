---
title: 日記の末尾にリンクを追加
date: 2005-12-05T00:00:00.000Z
lastmod: 2005-12-05T09:02:14.000Z
draft: false
tags:
  - tDiary
  - Ruby
  - SBS
---

この日記の末尾に、[はてなブックマーク](http://b.hatena.ne.jp/)や [mm/memo](http://1470.net/mm/) へのリンクを表示することにした。 [先日](/posts/20051023/p02)インストールした [category_to_tag プラグイン](http://sho.tdiary.net/20051010.html#p02) を削除し、[section_footer プラグイン](http://www.hsbt.org/hiki/hiki.cgi?section_footer.rb)を追加。

このプラグインを少し修正して、日記をブックマークに追加するアイコンは表示せずに、この日記を含むブックマークへのリンクのみを表示するようにしている。 理由は、 SBS (はてなブックマークや mm/memo) を使っている人は、 Bookmarklet を使ってブックマークしていることが多いため。 代替策があるのに、わざわざ一部の人しか使わないリンクを表示することはない。

それから、元のプラグインは「Permalink」「ブックマーク」「タグ」の順番で表示されるのを、「タグ」「ブックマーク」「Permalink」の順で表示されるように変更した。 これは、「タグ」の長さは可変で「ブックマーク」と「Permalink」の長さは固定だから。 タグを左端に置くことで、長さが固定のものは同じ場所に表示されるようになる。

#### 補足

「ブックマークに追加」のリンクを表示させることのメリットもある。

一つは、アンカーの有無によるブックマークの揺れを防ぐこと。 たとえば、「[Flickr API の認証](/posts/20051101/p01)」という日記は、「[20051101.html](http://b.hatena.ne.jp/entry/http://www.machu.jp/diary/20051101.html)」と「[20051101.html#p01](http://b.hatena.ne.jp/entry/http://www.machu.jp/diary/20051101.html%23p01)」の2つのURLでブックマークされている。 「ブックマークに追加」のリンクを表示しておけば、（そのリンク経由でブックマークしてもらう場合は）アンカー付きのURLで統一されることになる。 もう一つは、リンクがあるほうが気軽にブックマークしやすくなること。

個人的にはどちらもさほどメリットとは思えなかったので、見た目が煩雑になるというデメリットと比較して、削除することにした。

#### 追記2

「このエントリを含むはてなブックマーク」へのリンクを表示するよりも、日記内に直接ブックマークした人の人数を (3 Users みたいに) 表示できたほうがいいなぁ。 [exist API](http://d.hatena.ne.jp/keyword/%A4%CF%A4%C6%A4%CAexist%20API?kid=102640)を使えばできそうだけど、ちと負荷が高そう。
