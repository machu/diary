---
title: 人気の日記プラグイン (はてなブックマーク + MM/Memo)
date: 2005-12-27T00:00:00.000Z
lastmod: 2005-12-28T03:21:54.000Z
draft: false
tags:
  - tDiary
  - plugin
  - hatena
---

[MM/Memo の ExistAPI](http://tdiary.ishinao.net/20051213.html#p01) を使って、 MM/Memo のブックマーク件数も取得できるようにした。 はてなの API を取得する関数 (Hatena::BookmarkAPI#get\_count) を切り出して、クラスを継承させただけのやっつけ仕事 ([diff](http://dev.machu.jp:8080/sbs_plugin/trac.cgi/changeset/4)) 。 もう少し整理しないとな。

ダウンロードはさっきと同じリンクからどうぞ。 section\_footer.rb の記述はこちら。

```
# 「このエントリを含むMM/Memo」のリンクの追加
if @hatena_bookmark && @hatena_bookmark[:mmcounts]
  users = @hatena_bookmark[:mmcounts][permalink(date, index, false)]
  if users
    r << %Q|<a href="http://1470.net/mm/related?url=#{permalink(date, index)}" title="このエントリを含むMM/Memo"><img src="./images/info_icon.gif" width="19" height="12" style="border: none;" alt="このエントリを含むMM/Memo"> #{users} users</a>|
  end
else
  r << %Q|<a href="http://1470.net/mm/related?url=#{permalink(date, index)}"><img src="./images/info_icon.gif" width="19" height="12" style="border: none;" alt="このエントリを含むMM/Memo" title="このエントリを含むMM/Memo"></a>|
end
```
