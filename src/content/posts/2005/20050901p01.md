---
title: flickr プラグイン更新
date: 2005-09-01T00:00:00.000Z
lastmod: 2005-10-18T03:51:54.000Z
draft: false
tags:
  - tDiary
---

[8月11日版のflickr プラグイン](/posts/20050811/p01)に対して[やまださんからパッチを頂いた](http://arika.org/diary/20050831#p01)。 自分が書いたプログラムへのパッチを頂くのは初めてだけど、とても勉強になることが分かった（ありがとうございます）。

- 正規表現を定数で定義するのは、プラグインが何度も実行される時のオーバーヘッドを減らすためかな (CGI環境だとあまり意識しない)
- case when を使った正規表現のマッチング
- 正規表現の n オプション

などなど。

んで、頂いたパッチを取り込ませてもらったバージョンを改めて公開。 貼り付ける画像のサイズを img タグの height, width 要素に出力、画像の日本語タイトルに対応（環境依存かな）、 img タグに class="flickr" が追加されるようになった。

ついでに、Bookmarkletを使って、Flickrの画面からダイレクトに日記を書くページに飛べる機能を追加した。 Flickr は Atom インタフェースを備えているので、[tDiary が Atom に対応](http://sho.tdiary.net/20050401.html#p02)したら不要になるけど、それまでは役に立つはず。 Bookmarklet は tDiary の設定画面から取得できるようにしている。

#### ダウンロード＆使い方

tar.gz か zip のお好きなほうをダウンロードして、tDiary のプラグインディレクトリにコピーしてください。ライセンスは GPL です。

- [flickr_plugin-20050901.tar.gz](http://www.machu.jp/dist/flickr_plugin-20050901.tar.gz)
- [flickr_plugin-20050901.zip](http://www.machu.jp/dist/flickr_plugin-20050901.zip)

#### 追記

[右寄せ指定に対応したバージョン](/posts/20051018/p01)を公開しました。
