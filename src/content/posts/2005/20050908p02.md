---
title: colinux で cofs + shfs
date: 2005-09-08T00:00:00.000Z
lastmod: 2005-09-12T03:44:41.000Z
draft: false
tags:
  - Debian
---

#### cofs

これまでは colinux と Windows のファイル共有に、 WinSCP を使っていたんだけど、直接 colinux 上のファイルシステムにマウントできる cofs を使うことにした。 （以前も書いたような書いてないような）

まず、colinuxの設定ファイル (colinux.xml) に以下のように記述する。

```
<cofs_device index="0" path="\DosDevices\d:\" type="flat"
 enabled="true" />
```

これで、 cofs:0 が Windows の D ドライブにマッピングされる。 /etc/fstab に

```
cofs0:/work/share       /mnt/win        cofs    defaults        0 1
```

なんて書いておくと、 /mnt/win にて Windows の d:\work\share の内容が見られるようになる。 ただし、このままでは root のみが書き込み可能なので、 default を他のパラメータに変える必要がある。

#### shfs

次に、別サーバのディレクトリを ssh でマウントできるという shfs を使う。 手順は、「[nazonoDiary - shfs を入れてみる](http://d.hatena.ne.jp/nazoking/20050719/1121757444)」に書いてあるとおり。 ちと面倒だけど、やる価値はある。

準備ができたら、いよいよ接続。 マウントとアンマウントは以下の通り。

```
$ shfsmount machu@example.com ~/mnt/example.com
$ shfsumount ~/mnt/example.com
```

ssh の認証で（パスフレーズ無しの）公開鍵を使うようにしておくと、まさに自動。 素晴らしい。
