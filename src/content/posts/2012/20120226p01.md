---
title: 日記サーバのRubyを1.9.3-p125へ追従
date: 2012-02-26T00:00:00.000Z
lastmod: 2012-02-26T05:30:12.000Z
draft: false
tags:
  - tDiary
---

[Ruby 1.9.3-p125 がリリースされた](http://www.ruby-lang.org/ja/news/2012/02/16/ruby-1-9-3-p125-/)ので、この日記も追従。 忘れそうなので、手順をメモっておく。

#### 前提

- 日記サーバは[さくらのVPSサーバ](/posts/20100901/p01)を利用
- tDiaryは[Apache2.2 + FastCGI](/posts/20100503/p01)で動作
- [rbenvでRubyのバージョンを管理](/posts/20120123/p01)している

#### Rubyのバージョンアップ方法

sshでサーバへログオンし、Ruby1.9.3-p125をインストール。

```
$ rbenv install 1.9.3-p125
$ rbenv global 1.9.3-p125
$ rbenv rehash
```

日記ファイル (index.fcgi, update.rb) の先頭行はrbenvで以下のように指定。

```
 # !/home/machu/.rbenv/shims/ruby
```

次に、必要なライブラリをインストールする。

```
$ gem install fcgi
$ gem install redcarpet
```

最後に、Webサーバを再起動しておしまい。

```
$ sudo /etc/init.d/apache2 restart
```
