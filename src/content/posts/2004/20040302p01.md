---
title: カーネルのバージョンアップ (2)
date: 2004-03-02T00:00:00.000Z
lastmod: 2006-01-25T11:20:24.000Z
draft: false
tags:
  - Gentoo
---

先日からカーネルのバージョンアップを[試みている](/posts/20040226/p02)んだけど、結局2.4.25は断念して、2.4.23を使うことにした。

```
# ls -l /usr/src/linux
lrwxrwxrwx    1 root     root           21 Feb 29 21:19 /usr/src/linux -> linux-2.4.23_pre8-gss/
# genkernel all --menuconfig
```

PCMCIAとCardBusサポートをモジュールで組み込み（デフォルトでそうなっていた）、カーネルを構築。 次に、GRUBが新しいカーネルを起動するように grub.conf を書き換えた。

```
# cat /boot/grub/grub.conf
timeout 30
default 0
splashimage=(hd0,0)/boot/grub/splash.xpm.gz

# For booting GNU/Hurd
title  Gentoo Linux (genkernel)
root   (hd0,0)
kernel (hd0,0)/boot/kernel-2.4.23_pre8-gss-r2 root=/dev/hda3 vga=791
initrd (hd0,0)/boot/initrd-2.4.23_pre8-gss-r2
```

これで再起動すると、新しいカーネルで起動してきた。

```
# uname -a
Linux lavie 2.4.23_pre8-gss-r2 #1 Sun Feb 29 21:28:05 JST 2004 i686 Pentium III (Coppermine) GenuineIntel GNU/Linux
```

ただ、起動時に手動でブートドライブの位置 (/dev/hda1) を指定しなければいけないようになった。 なんでだろう？
