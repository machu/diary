---
title: Hotmailのメールを受信 (2)
date: 2004-02-05T00:00:00.000Z
lastmod: 2004-02-05T17:38:34.000Z
draft: false
tags:
  - Gentoo
---

GentooマシンにてHotmailを受信するために、 [hotway deamon](http://hotwayd.sourceforge.net/) をインストールする。

おっと、ebuild化されているのは0.5.3が最新みたい。本家では0.7.4が最新っていうのに。とにかく、emergeすると以下のファイルが作られる。

```
/etc/xinetd.d/hotwayd
/usr/sbin/hotwayd
```

特に設定ファイルはないようだ。[先日の日記](/posts/20040203/p01)にも書いたとおり、xinetd経由でPOP3 (110番ポート)にて待ち受けているんだな。/etc/xinetd.d/hotwayd をエディタで開き、 service hotwayd を service pop3 へ、 disable を no に設定する。すでにサーバ上の110番ポートが使われている場合は、 port を変えておくといいだろう。

編集が終わると、xinetdを再起動する。

```
# /etc/init.d/xinetd restart
```

telnetで接続のテストをしてみる。

```
$ telnet localhost pop3
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
+OK POP3 hotwayd v0.5.3 -> The POP3-HTTPMail Gateway. Server on lavie active.
QUIT
+OK see you later!
Connection closed by foreign host.
```

次に、実際にユーザ名（hotmailのアドレス）とパスワードを入れてみるも、パスワードが違うとのエラーがでる。

```
Unknown login or authentication error on ******@hotmail.com@localhost
```

調べてみたところ、[Hotmailの言語設定を英語にしなければいけない](http://jijixi.azito.com/diary/_trB6Zqa.html)とのこと。 なるほど、これは気がつかなかったなぁ。 これで、fetchmail経由でHotmailが読めるようになった。 ちなみに今のfetchmailの設定はこうなっている。

```
$ cat .fetchmailrc
set postmaster machu
set nobouncemail

defaults
protocol pop3
uidl
no mimedecode
smtphost localhost

poll s40.xrea.com  # for xrea
  user ******** pass ********

poll localhost  # for hotmail
  user ********@hotmail.com pass ********
```

あとは、Procmailを使った振り分けができればOK。

#### 追記

どうも、hotmail側で自動的にフォルダに振り分けたメールは受信されていないっぽい。 最新バージョンのhotwaydだと解決されているのかな？
