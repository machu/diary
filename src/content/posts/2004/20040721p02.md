---
title: makerss プラグイン
date: 2004-07-21T00:00:00.000Z
lastmod: 2004-07-22T14:15:36.000Z
draft: false
tags:
  - tDiary
---

SleipnirのRSSバーで[自分のサイトのRSS](http://www.machu.jp/diary/index.rdf)を見てみると、いくつか変なところがあった。

* 要約にタイトルが含まれている
* 要約が長すぎる

とりあえず makerss.rb を以下のように修正してみる。

```
@@ -167,9 +167,8 @@
                                rdf << %Q|<dc:subject>#{CGI::escapeHTML( category )}</dc:subject>\n|
                        end
                end
-               desc = apply_plugin( rdfsec.section.subtitle_to_html, true ).strip +
-                       apply_plugin( rdfsec.section.body_to_html, true ).strip
-               rdf << %Q|<description>#{@conf.shorten( CGI::escapeHTML( desc ), 500 )}</description>\n|
+               desc = apply_plugin( rdfsec.section.body_to_html, true ).strip
+               rdf << %Q|<description>#{@conf.shorten( CGI::escapeHTML( desc ), 120 )}</description>\n|
                text = '<h3>' + apply_plugin( rdfsec.section.subtitle_to_html ).strip + '</h3>' +
                        apply_plugin( rdfsec.section.body_to_html ).strip
                text.gsub!( /\]\]>/, ']]&gt;' )
```

要約の長さが120なのは、tDiaryのツッコミが表示される長さにならってのこと。 RSS的にはこれでいいかどうかは分からないや。

#### 追記

要約の長さは[「できれば500バイト以内」](http://www.kanzaki.com/docs/sw/rss.html#rss-item)ということだった ([tDiary-devel](http://www.tdiary.net/archive/devel/msg01587.html) より) 。
