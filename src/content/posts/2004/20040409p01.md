---
title: カウンタ表示プラグイン (3)
date: 2004-04-09T00:00:00.000Z
lastmod: 2004-06-27T06:11:57.000Z
draft: false
tags:
  - tDiary
---

導入してから今日で3日目。だんだんと[グラフっぽく](http://www.machu.jp/diary/images/20040409_0.png)なってきてうれしい。

[ログファイル名を明示しないとファイルがコピーされない件](http://phonondrive.com/20040407.html#p02)ですが、条件分岐に失敗しているみたいです。 下記の修正で動きました。

```
 if /^(append|replace)$/ =~ @mode and @cgi.params['hide'][0] != 'true' then
+ 	if @conf['tdiarygraph_f.log_path'] != "" and @conf['tdiarygraph_f.log_path'] != nil
- 	if @conf['tdiarygraph_f.log_path'] != "" or @conf['tdiarygraph_f.log_path'] != nil
 		logname = @conf['tdiarygraph_f.log_path']
 	else
 		logname = "tdiarygraph.log"
 	end
```

さっそく、昨日の[デバッグ方法](/posts/20040408/p02)が役に立ちました。

それから、[昨日書いたメモ](/posts/20040408/p01)に、作者の phonondrive さんから[ツッコミ](https://www.machu.jp/diary/20040408.html#c01)を頂きました。 キャッシュは悩みの種なんですね。 HTTPヘッダにキャッシュ禁止を表す Cache-Control:no-cache を埋め込めばいいのかな、と思ったのですが、XREA では難しそうでした。 まぁ、今回は累計表示が目的なので、1日2日くらいキャッシュされても問題ないと思います。
