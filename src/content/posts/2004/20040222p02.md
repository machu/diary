---
title: ダイナミックDNS
date: 2004-02-22T00:00:00.000Z
lastmod: 2004-02-23T00:26:07.000Z
draft: false
tags:
  - Gentoo
---

FTPサーバの用意はできたので、サーバのアドレスを家族に伝えなければいけない。 接続のたびにIPアドレスは変わるので、これを機にダイナミックDNS (DDNS) に登録することにした。

DDNSのサービスは、以前からアカウントを取得している [dyndns](http://www.dyndns.org) を使う。 そして、DDNSへのIPアドレスの登録は、ddclientというソフトで自動化する。 これでIPアドレスが変わっても、DDNSに登録した名前でアクセスできるようになる。

ddclientのインストールも emerge で完了。 ddclientはPerlスクリプトで書かれていて、 /etc/init.d 経由で起動するみたい。 設定ファイルは /etc/ddclient/ddclient.conf 。以下抜粋。

```
# 300秒毎にIPアドレスの更新チェック
daemon=300
# 登録するとrootにメールする
mail=root
# 自分のグローバルIPアドレスを調べるために、checkip.dyndns.orgを使う
use=web, web=checkip.dyndns.org/, web-skip='IP Address' # found after IP Address
login=xxxxxxxx
password=xxxxxxxx
# DDNSの登録名
server=members.dyndns.org,              \
protocol=dyndns2                        \
xxxxxxxx.dyndns.org
```

サーバの起動時に ddclientを自動起動させる。

```
# rc-update add ddclient default
```

これで、DDNS経由で自宅サーバにアクセスできるようになった。

```
$ resolveip xxxxxxxx.dyndns.org
IP address of machu.homelinux.net is 210.2xx.xx.xx
```
