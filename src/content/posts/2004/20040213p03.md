---
title: NICの認識
date: 2004-02-13T00:00:00.000Z
lastmod: 2004-02-13T14:59:27.000Z
draft: false
tags:
  - Gentoo
---

年末から年始にかけて[LPC-CB-CLXというCardBusタイプのNICを動作させようとしてた](/posts/20040106/p01)んだけど、結局断念していた。

> PCMCIAとCardBusサポートを有効にしてカーネルを再構築。しかし、カーネル付属の8139too, 8139cpでは完全に認識されない。Scyldのrtl8139を使えば、eth0として認識されるものの、パケットをすべてDropしてしまう。そもそもMACアドレスがFF:FF:FF:FF:FFになっているし。さらにカーネル側でなく、pcmcia_cs側での制御に切り替えてみると、lspciにも表示されない始末。

LinuxでPCカードを使うには、従来からのpcmcia_csを使う方法と、カーネル2.4以降で対応したPCカード機能を使う方法がある（みたい）。 試した結果、pcmcia_csではCardBus自体が認識されなかった（PCカードは認識していた）。 芽があるのはカーネルの機能を使うほうなんだけど、上の引用で書いたとおりPCIとしては認識される（lspciで表示される）ものの、ネットワークカードとしては認識されなかった。 PCIまで認識されているということで原因はドライバが対応していないと思い、色々なドライバを試したけど、動かずに今にいたっている。

で、久しぶりに調べてみたら、2chにて[動作報告](http://pc.2ch.net/test/read.cgi/linux/1073407902/370)を見つけた。

> 俺も同じ8139を使っているメルコのLPC-CB-CLXが認識されなくて困ってたけど、原因は8139tooじゃなくて8139cpをロードしようとしていた事だった。
>
> 念のために/etc/hotplug/blacklist に 8139cpを登録して、8139cp.oを削除してからdepmod -avして、/lib/modules/〜/modules.pcimap の8139cpの行を削除したら動くようになったよ。

Fedoraで動いたんだから、Gentooでも動くはず・・・。 ここまで徹底して8139cpを使わせないようにすればいいのかな？

今度、時間を見つけて試してみよう。
