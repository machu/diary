---
title: さくらインターネット その５ - 日記のURL
date: 2004-08-05T00:00:00.000Z
lastmod: 2007-09-01T17:22:43.000Z
draft: false
tags:
  - memo
---

[先日の日記](/posts/20040803/p01)に書いたけど、 さくらインターネットでは mod_rewrite が使えない。 なので、tDiary を「20040804.html」のような URL で使うためには、 [ErrorDocumentを使う方法](http://tdiary-users.sourceforge.jp/cgi-bin/wiki.cgi?html%A4%C7%A5%A2%A5%AF%A5%BB%A5%B9%A4%B7%A4%BF%A4%A4#i1)が必要。

しかし、この方法をさくらのサーバで試したところ、どの日付の日記にアクセスしても常に最新の日記しか表示されなかった。 「ErrorDocumentを使う方法」では、tDiary が REDIRECT_URL という環境変数を見ているみたい（[参考](http://sho.tdiary.net/20020929.html#p04)）だけど、 どうやらこの環境変数が設定されていないみたい。

でも、同じくさくらに移転された[kosaka日記](http://tnat.net/diary/20040730.html#c03)では、 ErrorDocument を使う方法でうまくいったとのこと。 ちょっと悩んだけど、ErrorDocument の転送先のURLに サーバ名まで含んでいたのが原因だった。 結局

```
<Files ~ "^([0-9]{6}|[0-9]{8}).html$">
  ErrorDocument 404 http://www.machu.jp/diary/nph-index.cgi
</Files>
```

ではなく、

```
<Files ~ "^([0-9]{6}|[0-9]{8}).html$">
  ErrorDocument 404 /diary/nph-index.cgi
</Files>
```

とするとうまく動いた。 これで移転に一歩前進かな。
