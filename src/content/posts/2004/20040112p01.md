---
title: Postfix (2)
date: 2004-01-12T00:00:00.000Z
lastmod: 2004-01-27T15:29:16.000Z
draft: false
tags:
  - Gentoo
---

メール送信のテストのため、 /usr/sbin/sendmail を実行すると、下記のエラーメッセージが表示された。

```
$ /usr/sbin/sendmail
postdrop: warning: mail_queue_enter: create file maildrop/167006.1978: No such file or directory
```

そこで、[postfixを送信専用でインストールする](http://discypus.jp/pc/linux/postfix-sendonly.shtml)を参考に、checkコマンドを実行する。

```
$ sudo /usr/sbin/postfix check
postfix/postfix-script: warning: not owned by root: /var/spool/postfix
```

/var/spool/postfix (main.cfのqueue\_directory) がrootのオーナーでない、とのことなので、chownでrootをオーナーにする。

```
$ sudo chown -R root /var/spool/postfix
```

もう一度checkコマンドを実行する。

```
$ sudo /usr/sbin/postfix check
postfix/postfix-script: warning: not owned by postfix: /var/spool/postfix/active
postfix/postfix-script: warning: not owned by postfix: /var/spool/postfix/bounce
postfix/postfix-script: warning: not owned by postfix: /var/spool/postfix/corrupt
postfix/postfix-script: warning: not owned by postfix: /var/spool/postfix/defer
postfix/postfix-script: warning: not owned by postfix: /var/spool/postfix/deferred
postfix/postfix-script: warning: not owned by postfix: /var/spool/postfix/flush
postfix/postfix-script: warning: not owned by postfix: /var/spool/postfix/hold
postfix/postfix-script: warning: not owned by postfix: /var/spool/postfix/incoming
postfix/postfix-script: warning: not owned by postfix: /var/spool/postfix/private
postfix/postfix-script: warning: not owned by postfix: /var/spool/postfix/public
postfix/postfix-script: warning: not owned by postfix: /var/spool/postfix/maildrop
postsuper: fatal: scan_dir_push: open directory defer: Permission denied
```

こんどは /var/spool/postfix 以下のディレクトリがpostfixのオーナでないとのこと。そこで、chownでpostfixをオーナーにする。

```
$ sudo chown postfix /var/spool/postfix/*
```

これでcheckするとエラーが出なくなったため、再度メール送信をテストする。

```
$ /usr/sbin/sendmail machu
test mail
.
```

/usr/sbin/sendmail -bp でキューにたまっているようだが・・・メールを見る方法がわからない！

今日はここまで。
