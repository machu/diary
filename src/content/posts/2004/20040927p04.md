---
title: PukiWiki のカスタマイズ (4) - ReverseLink の追加
date: 2004-09-27T00:00:00.000Z
lastmod: 2008-01-24T14:06:14.000Z
draft: false
tags:
  - memo
---

次に PukiWiki で気になるのが、ページ下の Link が機能していないこと。これは、リンク先のページとリンク元のページが一緒になっていることが原因っぽい。 BitChannel ではリンク元のページのみを ReverseLink として表示しているけど、これがブラウザの「戻る」ボタン的な働きをしていて都合がいい。 ページを階層化しなくても、ReverseLink を使えば効果的なナビゲーションができるはず。

ということで、PukiWiki のコードを修正してリンク元のページのみを表示するようにした。

```
--- pukiwiki-1.4.4/lib/file.php Sun Aug  1 23:23:20 2004
+++ lib/file.php        Tue Sep 28 12:11:07 2004
@@ -493,7 +493,7 @@
        if (isset($links[$page])) return $links[$page];

        // 可能ならmake_link()で生成した関連ページを取り込む
-       $links[$page] = ($page == $vars['page']) ? $related : array();
+       $links[$page] = array();

        // データベースから関連ページを得る
        $links[$page] += links_get_related_db($vars['page']);
```

#### 補足

元祖 Wiki にて、ページ名をクリックするとそのページ名の検索結果を表示するのは、この ReverseLink を実現するためなんじゃないかと気がついた。 なので、 ReverseLink を実装した Wiki では、ページ名クリックによる検索は不要だと判断。
