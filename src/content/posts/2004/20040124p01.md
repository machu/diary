---
title: syslog が起動していなかった
date: 2004-01-24T00:00:00.000Z
lastmod: 2004-01-31T19:49:22.000Z
draft: false
tags:
  - Gentoo
---

cronを設定しようと思い、vcronを起動させようと思ったところ、こんなエラーが出た。

```
# /etc/runlevels/default/vcron start
 * Starting syslog-ng...
parse error at 33
Parse error reading configuration file, exiting. (line 33)
 * Failed to start syslog-ng                                              [ !! ]

* ERROR:  Problem starting needed services.
*         "vcron" was not started.
```

調べてみると12日以降syslogが起動していなかったことが判明。 "/etc/syslog-ng/syslog-ng.conf" を見てみると、色々と記述ミスがあった。

```
diff -u syslog-ng.conf.org  syslog-ng.conf
--- syslog-ng.conf.org  2004-01-24 04:05:47.000000000 +0900
+++ syslog-ng.conf      2004-01-24 03:59:20.000000000 +0900
@@ -20,7 +20,7 @@

 # By default messages are logged to tty12...
 destination console_all { file("/dev/tty12"); };
-destination cron { file("var/log/cron.log"); };
+destination cron { file("/var/log/cron.log"); };
 destination mail { file("/var/log/mail.log"); };

 # ...if you intend to use /dev/console for programs like xconsole
@@ -30,5 +30,5 @@

 log { source(src); destination(messages); };
 log { source(src); destination(console_all); };
-log { source(src); destination(cron) };
-log { source(src); destination(mail) };
+log { source(src); filter(f_cron); destination(cron); };
+log { source(src); filter(f_mail); destination(mail); };
```

12日にsyslog-ng.confを編集した形跡がある（sudoを使っていたので判明）ので、その時に間違ったのだろうか。ああ、[日記](/posts/20040112/p02)を見るとやっぱり編集していた。ちゃんと、設定を変えた後は動作確認しないとな。反省。
