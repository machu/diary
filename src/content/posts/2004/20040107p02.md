---
title: 初期設定
date: 2004-01-07T00:00:00.000Z
lastmod: 2004-01-07T14:46:31.000Z
draft: false
tags:
  - Gentoo
---

#### ssh

昨日に引き続きGentooのインストールを行う。リモートからの接続のため、OpenSSHを設定。WindowsのSSHクライアントとして、PUTTYというソフトを発見。これなら昨日のTelnetdのインストールは不要だったかもしれない。

参考: [OpenSSHキー(鍵)の管理](http://www-6.ibm.com/jp/developerworks/linux/011019/j_l-keyc.html)

SSHサーバ (sshd) は初回起動時に自動的に鍵ペアが作られる。

```
$ sudo /sbin/rc-update add sshd default
 * sshd added to runlevel default
 * Caching service dependencies...                                        [ ok ]
 * rc-update complete.
$ sudo /etc/runlevels/default/sshd start
 * Generating Hostkey...
Generating public/private rsa1 key pair.
Your identification has been saved in /etc/ssh/ssh_host_key.
Your public key has been saved in /etc/ssh/ssh_host_key.pub.
The key fingerprint is:
bf:f6:90:6d:ed:77:11:82:f3:9f:f9:7e:38:2d:2b:4c root@lavie
 * Generating DSA-Hostkey...
Generating public/private dsa key pair.
Your identification has been saved in /etc/ssh/ssh_host_dsa_key.
Your public key has been saved in /etc/ssh/ssh_host_dsa_key.pub.
The key fingerprint is:
db:78:9f:00:33:5a:80:77:4c:1b:db:40:e6:42:c3:e6 root@lavie
 * Generating RSA-Hostkey...
Generating public/private rsa key pair.
Your identification has been saved in /etc/ssh/ssh_host_rsa_key.
Your public key has been saved in /etc/ssh/ssh_host_rsa_key.pub.
The key fingerprint is:
9c:8c:94:ce:94:6f:37:98:b7:37:61:be:b5:ce:d3:d8 root@lavie
 * Starting sshd...                                                       [ ok ]
```

次に、ユーザ側の鍵ペアを生成する。

```
$ ssh-keygen -C kohei@machu.jp -t dsa
Generating public/private dsa key pair.
Enter file in which to save the key (/home/machu/.ssh/id_dsa):
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in /home/machu/.ssh/id_dsa.
Your public key has been saved in /home/machu/.ssh/id_dsa.pub.
The key fingerprint is:
55:39:97:b5:d4:f9:24:0d:a7:ce:b1:63:3f:06:ed:61 kohei@machu.jp
```

生成した 公開鍵 (id\_dsa.pub) を authorized\_keys へコピーする。

```
$ cat ~/.ssh/id_dsa.pub >> ~/.ssh/authorized_keys
```

試しに接続してみる。

```
$ ssh localhost
Enter passphrase for key '/home/machu/.ssh/id_dsa':
Last login: Wed Jan  7 23:28:23 2004 from localhost
$
```

鍵のパスフレーズのみの入力でログインできた。後は、秘密鍵をWindowsマシンにコピーして、PuTTYから接続すればよい。付属の puttygen.exe を起動して、Loadボタンを押して鍵をインポートできる。

#### CVS

emerge cvs にてCVSをインストール。コンパイルは数分で終了した。
