---
title: PukiWiki のカスタマイズ (7) - 編集画面をシンプルに
date: 2004-09-27T00:00:00.000Z
lastmod: 2008-01-24T14:06:14.000Z
draft: false
tags:
  - memo
---

さらに書き忘れ。 PukiWiki では、ページの編集画面にて他のページをテンプレートとして読み込むことができる。しかし、ページ数が増えるとテンプレートのリストが膨大になってほとんど意味をなさなくなる （[PukiWiki-dev の編集画面](http://pukiwiki.sourceforge.jp/dev/?cmd=edit\&page=FrontPage)がいい例）。 ということで、このテンプレートのリストも削除した。

また、新しいページを作るときに、ページの先頭に作成元のページへのリンクが自動的に追加されるけど、これも ReverseLink で代用できるので削除。

具体的には lib/htmp.php をこのように変更している。

```
--- pukiwiki-1.4.4/lib/html.php Sat Aug  7 00:41:41 2004
+++ lib/html.php        Tue Sep 28 12:01:28 2004
@@ -156,18 +156,8 @@
                }
                ksort($pages);
                $s_pages = join("\n",$pages);
-               $template = <<<EOD
-  <select name="template_page">
-   <option value="">-- $_btn_template --</option>
-$s_pages
-  </select>
-  <input type="submit" name="template" value="$_btn_load" accesskey="r" />
-  <br />
-EOD;
+               $template = '';

-               if (array_key_exists('refer',$vars) and $vars['refer'] != '') {
-                       $refer = '[['.strip_bracket($vars['refer'])."]]\n\n";
-               }
        }

        $r_page = rawurlencode($page);
@@ -191,8 +181,10 @@
   <input type="submit" name="preview" value="$btn_preview" accesskey="p" />
   <input type="submit" name="write" value="$_btn_update" accesskey="s" />
   $add_top
-  <input type="checkbox" name="notimestamp" value="true"$checked_time />
+  <input type="checkbox" id="notimestamp" name="notimestamp" value="true"$checked_time />
+  <label for="notimestamp">
   <span style="small">$_btn_notchangetimestamp</span>
+  </label>
   <textarea name="original" rows="1" cols="1" style="display:none">$s_original</textarea>
  </div>
 </form>
```

※ ついでに、「タイムスタンプを変更しない」のチェックボックスにラベルをつけている。

※ テンプレートのリストを削除するためには、ソースを修正しなくても default.ini.php の $load\_template\_func を 0 にすれば良いようです（2004-11-02 追記）。
