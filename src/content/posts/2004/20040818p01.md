---
title: mod_rewrite が使えなくても .html でアクセス
date: 2004-08-18T00:00:00.000Z
lastmod: 2006-06-08T13:08:07.000Z
draft: false
tags:
  - BitChannel
---

さくらのレンタルサーバでは mod\_rewrite が使えないので、 .html という URL ではBitChannelのページへアクセスできなかった。 そこで、[ErrorDocumentを使う方法](http://tdiary-users.sourceforge.jp/cgi-bin/wiki.cgi?html%A4%C7%A5%A2%A5%AF%A5%BB%A5%B9%A4%B7%A4%BF%A4%A4#i1)を BitChannel にも適用した。

CVS HEAD の lib/bitchannel/handler.rb をこんな感じで追加。

```
@@ -203,6 +203,10 @@
       @request = req
       @locale = locale
       @pathinfo_sensitive = pathinfo_sensitive
+      if %r[/\w+\.html?$] =~ ENV['REDIRECT_URL'] and not @request.query['cmd']
+        @request.query['cmd'] = 'view'
+        @request.query['name'] = ENV['REDIRECT_URL'].sub(%r[^.*/(\w+)\.html?$], '\1')
+      end
     end

     def cmd
```
