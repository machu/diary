---
title: 検索でのエラー
date: 2004-07-27T00:00:00.000Z
lastmod: 2004-07-28T01:45:19.000Z
draft: false
tags:
  - tDiary
---

この日記では、検索に [tdiarysearch](http://i.loveruby.net/w/tdiarysearch.html) を使っているんだけど、検索時にエラーになってしまうことが多かった。 試しに、デバッグ機能を有効にしてエラーを表示させてみる。

```
TypeError
cannot convert nil into String
(plugin/image_ex.rb):153:in `+'
/home/machu/diary/tdiary.rb:72:in `join'
/home/machu/diary/tdiary.rb:72:in `safe'
/home/machu/diary/tdiary.rb:780:in `apply_plugin'
```

どうやら、[image\_exプラグイン](http://docs.tdiary.org/ja/?image_ex.rb)が例外を出しているみたい。 ということは、検索結果に画像を登録した日の日記が含まれていた場合にエラーになっていたのかな。

暫定対処として、 tdiarysearch にて @config.options\['apply\_plugin'] = false と設定。 プラグインが出力する文字列が検索結果に出てこなくなるけど、とりあえずはこれでいいかな。
