---
title: RAID1 とバックアップを使う
date: 2007-07-21T00:00:00.000Z
lastmod: 2007-07-22T16:56:51.000Z
draft: false
tags:
  - Windows
---

痛い目にあわないと理解しないバックアップ対策の大切さ。 HDDも1台増えちゃったし、マザーボードにも RAID コントローラがついていることだし、 RAID を組むことにする。 以下、やったことのメモ。

#### RAID 化する前の HDD 構成

- HDD0 … 200GB (ダイナミックディスク・スパンボリューム)
- HDD1 … 250GB (ダイナミックディスク・スパンボリューム)
- HDD2 … 320GB (ベーシックディスク) ← ここに新しく OS をインストールしている

#### データの退避＆ディスクの初期化

- スパンボリュームに入っている大切なデータを、ベーシックディスクの HDD2 へとコピー
- HDD0 と HDD1 のパーティションを削除し、それぞれのディスクをベーシックディスクに変換

#### RAID1 化

[過去の日記](/posts/20050328/p01)によると、使っているマザーボードは [GIGABYTE GA-K8N Ultra-9](http://www.gigabyte.com.tw/Products/Motherboard/Products_Spec.aspx?ProductID=1868)。 日記をつけておくと、こういうときに役に立つ。 このマザーボードには RAID コントローラが付いている。

- 起動時に DEL キーで BIOS の設定画面へ。 SATA の RAID コントローラを有効にする。

  - 対象は HDD0 と HDD1 が繋がっている SATA1 のプライマリとセカンダリ。
  - HDD2 が繋がっている SATA2 は無効のままにしておく。

- 再起動後に F10 キーで RAID の設定画面へ。 HDD0 と HDD1 でミラーリング（RAID1）を組む。

- シングルの HDD2 にて Windows を起動

- 起動後に「新しいハードウェアが見つかりました」と表示されるので、「ドライバの検索」で RAID コントローラのドライバをインストール

- 「管理ツール」から「ディスクの管理」を開くと、新しいドライブが1つ見える。

  - これが RAID1 でミラーリングされている HDD0 と HDD1 。
  - このドライブを NTFS でフォーマットし、 D ドライブに割り当てる。

#### RAID 化後の HDD 構成

- HDD0 & HDD1 … 200GB (ベーシックディスク・NTFS) ← 中身は空
- HDD2 … 320GB (ベーシックディスク・NTFS) ← OS + 復旧したデータ

本当は RAID 化したディスクに OS から何から入れるのがいいんだろうけど、 RAID のディスクに OS をインストールするためには FDD ドライブが必要らしいので、やめた。 OS はいつ消えてもいい覚悟で使うか。 大切なのはデータの方だし。

#### バックアップの設定

最後にデータのバックアップ。 デジカメで撮影した写真のデータが30GB弱ある。 DVD-RAM を買ってきて、そこにコピーしようとしたんだけど、1枚1時間、トータルで6時間ほどかかる見込みだったのでやめた。 時間のかかるバックアップ方法だと、そのうち面倒でバックアップしなくなりそうだからね。

結局、以下の方針にした。

- HDD0 & HDD1 (RAID1) … Dドライブに割り当て。マイドキュメント、マイピクチャ（Picasaの管理フォルダ）、マイミュージック（iTunesの管理フォルダ）を格納する。
- HDD2 … パーティションを2つに分ける。1つが OS を入れている C ドライブ。もう 1 つのドライブを、Dドライブからのバックアップ用にする。

バックアップには、 Windows 標準のバックアップツールを使う。 これだとスケジュール実行もできるし、差分バックアップもできる。 30GBのデータのバックアップも20分弱で終了。 これなら実用的だ。

そもそもバックアップディスクを別に分けるのなら、 RAID 化する必要があったのか？という疑問は残るけど、まぁいいや。
