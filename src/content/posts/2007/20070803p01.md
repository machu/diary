---
title: 人気の日記プラグインを更新 (2)
date: 2007-08-03T00:00:00.000Z
lastmod: 2007-08-04T02:19:41.000Z
draft: false
tags:
  - tDiary
---

自分の日記にツッコミを入れたら、人気の日記プラグインでエラーが出ていた。 調べてみたら、 add\_update\_proc で return していたのが原因だった。 おとなしく if を使うように変更。

```
--- hatena_bookmark_popular.rb  (revision 49)
+++ hatena_bookmark_popular.rb  (working copy)
@@ -123,10 +123,11 @@
   # 人気の日記一覧を取得する （日記更新時）
   add_update_proc do
     # ツッコミ時は実行しない
-    return unless @mode == 'append' or @mode == 'replace'
-    begin
-      hatena_bookmark_popular_update
-    rescue
+    if @mode == 'append' or @mode == 'replace'
+      begin
+        hatena_bookmark_popular_update
+      rescue
+      end
     end
   end
 end
```
