---
title: autorun.inf では USB メモリは自動起動しない？
date: 2007-02-01T00:00:00.000Z
lastmod: 2008-07-17T18:09:46.000Z
draft: false
tags:
  - security
  - virus
---

先日書いた[他人の USB メモリを挿す時は Shift キーを押しっぱなしにする（ウイルス感染対策）](/posts/20070128/p02)という日記ですが、僕の事実誤認の可能性があります。

[はてなブックマーク - cubickのブックマーク](http://b.hatena.ne.jp/cubick/20070201#bookmark-3826154)にて、「そもそもUSBメモリじゃautorun効かなかったような…」という気になるコメントを頂きました。 そこでWeb 上を調べてみたところ、[USB接続したメディア内の“autorun.inf”を自動実行できるツール](http://www.forest.impress.co.jp/article/2005/11/11/apousbautorun.html)がある（逆に言うとこういうツールがないと自動実行できない？）ことや、[問題 ：autorun.infでbatファイルが実行されない](http://pasokoma.jp/bbs8/lg228975.html#229435)というスレッドがあることが分かりました。

このことから、先日の日記に書いた、「USBメモリを挿すだけで感染する」という内容は、事実でない可能性があります。 （「可能性がある」という歯切れの悪い言い方をしているのは、「USBメモリを挿すだけでプログラムが自動実行されることは絶対に無い」という事実を確認できていないからです）

ですので、先日の日記の『USBメモリを挿すだけで感染する』と『「USBメモリを挿す時はSHIFTキーを押したままにすること」が、セキュリティ対策の常識になる日も近いかも？』という記述は撤回します。 この日の日記は多くの方に読んでいただいたのですが、誤った記述でいらぬ不安を抱かせてしまったことをお詫びします。

#### 現状の整理

今の時点で、この件について僕が確認できている内容は、以下の通りです。

- USBメモリの「sxs.exe」というファイルがウイルススキャンによってウイルスと検出された。
- トレンドマイクロの[WORM_QQPASS.ADH - 詳　細](http://www.trendmicro.co.jp/vinfo/virusencyclo/default5.asp?VName=WORM_QQPASS.ADH&VSect=T)には、「USBフラッシュメモリ等のリムーバブルドライブを利用して感染活動を行います」および「"AUTORUN.INF" というファイルは、ワームのコピーを自動実行する無害なシステムファイル」との記載がある。（USBメモリを挿すだけで感染するという記載はない）
- 自分のUSBメモリにautorun.infを格納したが、USBメモリを挿すだけではプログラムは実行されなかった。

3点目については、以下のように実験しています。

- USBメモリのルートディレクトリに notepad.exe をコピーし、 sxs.exe にリネーム.
- [WORM_QQPASS.ADH - 詳　細](http://www.trendmicro.co.jp/vinfo/virusencyclo/default5.asp?VName=WORM_QQPASS.ADH&VSect=T)に記載されているとおりに autorun.inf を作成し、USBメモリのルートディレクトリにコピー。
- USBメモリを取り外し、再度PCに挿入。

結果は「Windowsが実行する動作を選んでください」というダイアログが出ただけで、 sxs.exe にリネームした notepad.exe が実行されることはありませんでした。

#### 終わりに

繰り返しになりますが、 USB メモリを挿すだけで自動的にプログラムが実行するかどうかは、僕には分からない状態です。 状況を見ると自動起動しないように推測していますが、絶対に自動起動する方法が無いとは言い切れません。 この日記だけをみて判断されることの無いように、重ねてお願いいたします。

重要な指摘を頂いた [id:cubick](http://b.hatena.ne.jp/cubick/) さんに感謝します。

#### さらに追記

[やっぱり自動起動する場合もある](/posts/20070204/p01)ようです。
