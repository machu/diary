---
title: 人気の日記プラグインを更新
date: 2006-10-12T00:00:00.000Z
lastmod: 2008-09-25T14:56:18.000Z
draft: false
tags:
  - tDiary
---

3日連続で tDiary ネタ。

[![人気の日記プラグイン](https://farm1.staticflickr.com/81/267772152_4e75328f18.jpg "人気の日記プラグイン")](http://www.flickr.com/photos/machu/267772152/)

日記の中で、よくブックマークされた日記のリストを表示する、「人気の日記プラグイン」を作った。 といっても、[はてなブックマーク - ○○ の注目エントリー](http://b.hatena.ne.jp/entrylist?url=http://www.machu.jp/diary/&sort=hot)で配信している RSS を変換しているだけ。

以前公開していた [人気の日記プラグイン](/posts/20051227/p02) (hatena_bookmark.rb) を、[はてなブックマークカウンタープラグイン](/posts/20061010/p01) (hatena_bookmark_counter.rb) と、この人気の日記プラグイン (hatena_bookmark_entry) に分割したようなもの。

#### ダウンロード

[trac の hatena_bookmark_entry.rb](http://www.machu.jp/trac/tdiary_plugin/browser/trunk/plugin/hatena_bookmark_entry.rb)から、[Original Format](http://www.machu.jp/trac/tdiary_plugin/browser/trunk/plugin/hatena_bookmark_entry.rb?format=raw)をクリックするとダウンロードできます。 プラグインを有効にしたあとに、人気の日記を表示したい場所に、

```
<h3>人気の日記</h3>
<%= hatena_bookmark_entry %>
```

といった具合に記述してください。

#### その他

- 負荷削減のため、一度取得した人気の日記リストはキャッシュされます（cache_dir/hatena/bookmark.dat）
- 人気の日記リストは、日記を更新したタイミングで取得します。一番最初は、日記を更新するまで日記リストが表示されません。
