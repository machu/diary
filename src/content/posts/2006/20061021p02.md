---
title: TextDrive でサブドメイン (2)
date: 2006-10-21T00:00:00.000Z
lastmod: 2006-10-21T06:44:07.000Z
draft: false
tags:
  - textdrive
---

ドメイン数を消費するのは嫌なので、簡易サブドメイン機能を使うことにする。 サンプル的に、以下のようにファイルを置く。

```
web/public/index.html
web/public/diary/diary.html
```

これで <http://diary.example.com/> にアクセスすると……なぜか index.html が見えてしまうよ！ サブドメイン機能が有効になっていない…としばらく悩んだあげく、 <http://diary.example.com/diary.html> にアクセスすると diary.html の中身が見えることに気づく。

もしかして、サブドメイン側にファイルが無かった場合は、メインドメイン側のファイルを見ている？ 実験してみることにした。

#### ファイルの配置

以下の4つのファイルを配置する。 test2.html はメインドメイン側とサブドメイン側で中身を変えている。

```
web/public/test1.html
web/public/test2.html
web/public/diary/test2.html
web/public/diary/test3.html
```

#### 実験結果

アクセス先と表示結果はこのようになった。

|    |                                       |                             |
| -- | ------------------------------------- | --------------------------- |
| No | アクセス先                                 | 表示結果                        |
| 1  | <http://www.example.com/test1.html>   | web/public/test1.html       |
| 2  | <http://www.example.com/test2.html>   | web/public/test2.html       |
| 3  | <http://www.example.com/test3.html>   | 300 Multiple Choices        |
| 4  | <http://diary.example.com/test1.html> | web/public/test1.html       |
| 5  | <http://diary.example.com/test2.html> | web/public/diary/test2.html |
| 6  | <http://diary.example.com/test3.html> | web/public/diary/test3.html |

やっぱり、サブドメイン → メインドメインの順でファイルを見ているのか。 予想外だったのは 3 番。 てっきり 404 Not Found が表示されると思っていたら、 300 Multiple Choices が表示された。 test3.html は無いけど、 test1.html と test2.html ならあるよという、そんな感じ。
